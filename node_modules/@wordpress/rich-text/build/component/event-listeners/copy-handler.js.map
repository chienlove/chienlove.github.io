{"version":3,"names":["_toHtmlString","require","_isCollapsed","_slice","_getTextContent","_default","props","element","onCopy","event","record","current","ownerDocument","isCollapsed","contains","activeElement","selectedRecord","slice","plainText","getTextContent","html","toHTMLString","value","clipboardData","setData","preventDefault","type","execCommand","defaultView","addEventListener","removeEventListener","exports","default"],"sources":["@wordpress/rich-text/src/component/event-listeners/copy-handler.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { toHTMLString } from '../../to-html-string';\nimport { isCollapsed } from '../../is-collapsed';\nimport { slice } from '../../slice';\nimport { getTextContent } from '../../get-text-content';\n\nexport default ( props ) => ( element ) => {\n\tfunction onCopy( event ) {\n\t\tconst { record } = props.current;\n\t\tconst { ownerDocument } = element;\n\t\tif (\n\t\t\tisCollapsed( record.current ) ||\n\t\t\t! element.contains( ownerDocument.activeElement )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedRecord = slice( record.current );\n\t\tconst plainText = getTextContent( selectedRecord );\n\t\tconst html = toHTMLString( { value: selectedRecord } );\n\t\tevent.clipboardData.setData( 'text/plain', plainText );\n\t\tevent.clipboardData.setData( 'text/html', html );\n\t\tevent.clipboardData.setData( 'rich-text', 'true' );\n\t\tevent.preventDefault();\n\n\t\tif ( event.type === 'cut' ) {\n\t\t\townerDocument.execCommand( 'delete' );\n\t\t}\n\t}\n\n\tconst { defaultView } = element.ownerDocument;\n\n\tdefaultView.addEventListener( 'copy', onCopy );\n\tdefaultView.addEventListener( 'cut', onCopy );\n\treturn () => {\n\t\tdefaultView.removeEventListener( 'copy', onCopy );\n\t\tdefaultView.removeEventListener( 'cut', onCopy );\n\t};\n};\n"],"mappings":";;;;;;AAGA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AACA,IAAAG,eAAA,GAAAH,OAAA;AANA;AACA;AACA;AAFA,IAAAI,QAAA,GAQiBC,KAAK,IAAQC,OAAO,IAAM;EAC1C,SAASC,MAAMA,CAAEC,KAAK,EAAG;IACxB,MAAM;MAAEC;IAAO,CAAC,GAAGJ,KAAK,CAACK,OAAO;IAChC,MAAM;MAAEC;IAAc,CAAC,GAAGL,OAAO;IACjC,IACC,IAAAM,wBAAW,EAAEH,MAAM,CAACC,OAAQ,CAAC,IAC7B,CAAEJ,OAAO,CAACO,QAAQ,CAAEF,aAAa,CAACG,aAAc,CAAC,EAChD;MACD;IACD;IAEA,MAAMC,cAAc,GAAG,IAAAC,YAAK,EAAEP,MAAM,CAACC,OAAQ,CAAC;IAC9C,MAAMO,SAAS,GAAG,IAAAC,8BAAc,EAAEH,cAAe,CAAC;IAClD,MAAMI,IAAI,GAAG,IAAAC,0BAAY,EAAE;MAAEC,KAAK,EAAEN;IAAe,CAAE,CAAC;IACtDP,KAAK,CAACc,aAAa,CAACC,OAAO,CAAE,YAAY,EAAEN,SAAU,CAAC;IACtDT,KAAK,CAACc,aAAa,CAACC,OAAO,CAAE,WAAW,EAAEJ,IAAK,CAAC;IAChDX,KAAK,CAACc,aAAa,CAACC,OAAO,CAAE,WAAW,EAAE,MAAO,CAAC;IAClDf,KAAK,CAACgB,cAAc,CAAC,CAAC;IAEtB,IAAKhB,KAAK,CAACiB,IAAI,KAAK,KAAK,EAAG;MAC3Bd,aAAa,CAACe,WAAW,CAAE,QAAS,CAAC;IACtC;EACD;EAEA,MAAM;IAAEC;EAAY,CAAC,GAAGrB,OAAO,CAACK,aAAa;EAE7CgB,WAAW,CAACC,gBAAgB,CAAE,MAAM,EAAErB,MAAO,CAAC;EAC9CoB,WAAW,CAACC,gBAAgB,CAAE,KAAK,EAAErB,MAAO,CAAC;EAC7C,OAAO,MAAM;IACZoB,WAAW,CAACE,mBAAmB,CAAE,MAAM,EAAEtB,MAAO,CAAC;IACjDoB,WAAW,CAACE,mBAAmB,CAAE,KAAK,EAAEtB,MAAO,CAAC;EACjD,CAAC;AACF,CAAC;AAAAuB,OAAA,CAAAC,OAAA,GAAA3B,QAAA","ignoreList":[]}