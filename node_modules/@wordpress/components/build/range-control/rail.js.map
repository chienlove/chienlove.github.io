{"version":3,"sources":["@wordpress/components/src/range-control/rail.tsx"],"names":["RangeRail","props","disabled","marks","min","max","step","value","restProps","Marks","stepProp","marksData","useMarks","map","mark","key","range","Array","isArray","count","Math","round","push","length","placedMarks","forEach","index","isFilled","offset","offsetStyle","style"],"mappings":";;;;;;;;;;;;;AAGA;;AAKA;;AACA;;AATA;AACA;AACA;;AAGA;AACA;AACA;AAYe,SAASA,SAAT,CACdC,KADc,EAEb;AACD,QAAM;AACLC,IAAAA,QAAQ,GAAG,KADN;AAELC,IAAAA,KAAK,GAAG,KAFH;AAGLC,IAAAA,GAAG,GAAG,CAHD;AAILC,IAAAA,GAAG,GAAG,GAJD;AAKLC,IAAAA,IAAI,GAAG,CALF;AAMLC,IAAAA,KAAK,GAAG,CANH;AAOL,OAAGC;AAPE,MAQFP,KARJ;AAUA,SACC,qDACC,4BAAC,wBAAD;AAAM,IAAA,QAAQ,EAAGC;AAAjB,KAAiCM,SAAjC,EADD,EAEGL,KAAK,IACN,4BAAC,KAAD;AACC,IAAA,QAAQ,EAAGD,QADZ;AAEC,IAAA,KAAK,EAAGC,KAFT;AAGC,IAAA,GAAG,EAAGC,GAHP;AAIC,IAAA,GAAG,EAAGC,GAJP;AAKC,IAAA,IAAI,EAAGC,IALR;AAMC,IAAA,KAAK,EAAGC;AANT,IAHF,CADD;AAeA;;AAED,SAASE,KAAT,CAAgBR,KAAhB,EAAuE;AACtE,QAAM;AACLC,IAAAA,QAAQ,GAAG,KADN;AAELC,IAAAA,KAAK,GAAG,KAFH;AAGLC,IAAAA,GAAG,GAAG,CAHD;AAILC,IAAAA,GAAG,GAAG,GAJD;AAKLC,IAAAA,IAAI,EAAEI,QAAQ,GAAG,CALZ;AAMLH,IAAAA,KAAK,GAAG;AANH,MAOFN,KAPJ;AASA,QAAMK,IAAI,GAAGI,QAAQ,KAAK,KAAb,GAAqB,CAArB,GAAyBA,QAAtC;AACA,QAAMC,SAAS,GAAGC,QAAQ,CAAE;AAAET,IAAAA,KAAF;AAASC,IAAAA,GAAT;AAAcC,IAAAA,GAAd;AAAmBC,IAAAA,IAAnB;AAAyBC,IAAAA;AAAzB,GAAF,CAA1B;AAEA,SACC,4BAAC,gCAAD;AACC,mBAAY,MADb;AAEC,IAAA,SAAS,EAAC;AAFX,KAIGI,SAAS,CAACE,GAAV,CAAiBC,IAAF,IAChB,4BAAC,aAAD,6BACMA,IADN;AAEC,IAAA,GAAG,EAAGA,IAAI,CAACC,GAFZ;AAGC,mBAAY,MAHb;AAIC,IAAA,QAAQ,EAAGb;AAJZ,KADC,CAJH,CADD;AAeA;;AAED,SAASU,QAAT,OAMkB;AAAA,MANC;AAClBT,IAAAA,KADkB;AAElBC,IAAAA,GAAG,GAAG,CAFY;AAGlBC,IAAAA,GAAG,GAAG,GAHY;AAIlBC,IAAAA,IAAI,GAAG,CAJW;AAKlBC,IAAAA,KAAK,GAAG;AALU,GAMD;;AACjB,MAAK,CAAEJ,KAAP,EAAe;AACd,WAAO,EAAP;AACA;;AAED,QAAMa,KAAK,GAAGX,GAAG,GAAGD,GAApB;;AACA,MAAK,CAAEa,KAAK,CAACC,OAAN,CAAef,KAAf,CAAP,EAAgC;AAC/BA,IAAAA,KAAK,GAAG,EAAR;AACA,UAAMgB,KAAK,GAAG,IAAIC,IAAI,CAACC,KAAL,CAAYL,KAAK,GAAGV,IAApB,CAAlB;;AACA,WAAQa,KAAK,GAAGhB,KAAK,CAACmB,IAAN,CAAY;AAAEf,MAAAA,KAAK,EAAED,IAAI,GAAGH,KAAK,CAACoB,MAAb,GAAsBnB;AAA/B,KAAZ,CAAhB,CAAoE;AACpE;;AAED,QAAMoB,WAA6B,GAAG,EAAtC;AACArB,EAAAA,KAAK,CAACsB,OAAN,CAAe,CAAEX,IAAF,EAAQY,KAAR,KAAmB;AACjC,QAAKZ,IAAI,CAACP,KAAL,GAAaH,GAAb,IAAoBU,IAAI,CAACP,KAAL,GAAaF,GAAtC,EAA4C;AAC3C;AACA;;AACD,UAAMU,GAAG,GAAI,QAAQW,KAAO,EAA5B;AACA,UAAMC,QAAQ,GAAGb,IAAI,CAACP,KAAL,IAAcA,KAA/B;AACA,UAAMqB,MAAM,GAAI,GAAK,CAAEd,IAAI,CAACP,KAAL,GAAaH,GAAf,IAAuBY,KAAzB,GAAmC,GAAK,GAA3D;AAEA,UAAMa,WAAW,GAAG;AACnB,OAAE,qBAAU,OAAV,GAAoB,MAAtB,GAAgCD;AADb,KAApB;AAIAJ,IAAAA,WAAW,CAACF,IAAZ,CAAkB,EACjB,GAAGR,IADc;AAEjBa,MAAAA,QAFiB;AAGjBZ,MAAAA,GAHiB;AAIjBe,MAAAA,KAAK,EAAED;AAJU,KAAlB;AAMA,GAlBD;AAoBA,SAAOL,WAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport RangeMark from './mark';\nimport { MarksWrapper, Rail } from './styles/range-control-styles';\n\nimport type { WordPressComponentProps } from '../ui/context';\nimport type {\n\tMarksProps,\n\tRangeMarkProps,\n\tRailProps,\n\tUseMarksArgs,\n} from './types';\n\nexport default function RangeRail(\n\tprops: WordPressComponentProps< RailProps, 'span' >\n) {\n\tconst {\n\t\tdisabled = false,\n\t\tmarks = false,\n\t\tmin = 0,\n\t\tmax = 100,\n\t\tstep = 1,\n\t\tvalue = 0,\n\t\t...restProps\n\t} = props;\n\n\treturn (\n\t\t<>\n\t\t\t<Rail disabled={ disabled } { ...restProps } />\n\t\t\t{ marks && (\n\t\t\t\t<Marks\n\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\tmarks={ marks }\n\t\t\t\t\tmin={ min }\n\t\t\t\t\tmax={ max }\n\t\t\t\t\tstep={ step }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nfunction Marks( props: WordPressComponentProps< MarksProps, 'span' > ) {\n\tconst {\n\t\tdisabled = false,\n\t\tmarks = false,\n\t\tmin = 0,\n\t\tmax = 100,\n\t\tstep: stepProp = 1,\n\t\tvalue = 0,\n\t} = props;\n\n\tconst step = stepProp === 'any' ? 1 : stepProp;\n\tconst marksData = useMarks( { marks, min, max, step, value } );\n\n\treturn (\n\t\t<MarksWrapper\n\t\t\taria-hidden=\"true\"\n\t\t\tclassName=\"components-range-control__marks\"\n\t\t>\n\t\t\t{ marksData.map( ( mark ) => (\n\t\t\t\t<RangeMark\n\t\t\t\t\t{ ...mark }\n\t\t\t\t\tkey={ mark.key }\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</MarksWrapper>\n\t);\n}\n\nfunction useMarks( {\n\tmarks,\n\tmin = 0,\n\tmax = 100,\n\tstep = 1,\n\tvalue = 0,\n}: UseMarksArgs ) {\n\tif ( ! marks ) {\n\t\treturn [];\n\t}\n\n\tconst range = max - min;\n\tif ( ! Array.isArray( marks ) ) {\n\t\tmarks = [];\n\t\tconst count = 1 + Math.round( range / step );\n\t\twhile ( count > marks.push( { value: step * marks.length + min } ) );\n\t}\n\n\tconst placedMarks: RangeMarkProps[] = [];\n\tmarks.forEach( ( mark, index ) => {\n\t\tif ( mark.value < min || mark.value > max ) {\n\t\t\treturn;\n\t\t}\n\t\tconst key = `mark-${ index }`;\n\t\tconst isFilled = mark.value <= value;\n\t\tconst offset = `${ ( ( mark.value - min ) / range ) * 100 }%`;\n\n\t\tconst offsetStyle = {\n\t\t\t[ isRTL() ? 'right' : 'left' ]: offset,\n\t\t};\n\n\t\tplacedMarks.push( {\n\t\t\t...mark,\n\t\t\tisFilled,\n\t\t\tkey,\n\t\t\tstyle: offsetStyle,\n\t\t} );\n\t} );\n\n\treturn placedMarks;\n}\n"]}