{"version":3,"sources":["@wordpress/components/src/mobile/color-settings/palette.screen.native.js"],"names":["HIT_SLOP","top","bottom","left","right","THEME_PALETTE_NAME","PaletteScreen","route","navigation","shouldEnableBottomSheetScroll","BottomSheetContext","label","onColorChange","onGradientChange","onColorCleared","colorValue","defaultSettings","hideNavigation","params","segments","isGradient","colorsUtils","currentValue","setCurrentValue","isGradientColor","selectedSegmentIndex","allAvailableColors","currentSegment","setCurrentSegment","isGradientSegment","currentSegmentColors","colors","gradients","horizontalSeparatorStyle","styles","horizontalSeparator","horizontalSeparatorDark","clearButtonStyle","clearButton","clearButtonDark","selectedColorTextStyle","colorText","colorTextDark","isSolidSegment","isCustomGadientShown","setColor","color","onClear","undefined","onCustomPress","navigate","screens","picker","gradientPicker","getClearButton","clearButtonContainer","getFooter","indexOf","colorIndicator","footer","flex","toUpperCase","selectColorText","goBack","colorPalettes","map","palette","paletteKey","paletteSettings","allColors","enableCustomColor","name"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useContext } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport {\n\tColorControl,\n\tPanelBody,\n\tBottomSheetContext,\n\tuseMobileGlobalStylesColors,\n} from '@wordpress/components';\nimport { useRoute, useNavigation } from '@react-navigation/native';\n\n/**\n * Internal dependencies\n */\nimport ColorPalette from '../../color-palette';\nimport ColorIndicator from '../../color-indicator';\nimport NavBar from '../bottom-sheet/nav-bar';\nimport SegmentedControls from '../segmented-control';\nimport { colorsUtils } from './utils';\n\nimport styles from './style.scss';\n\nconst HIT_SLOP = { top: 8, bottom: 8, left: 8, right: 8 };\nconst THEME_PALETTE_NAME = 'Theme';\n\nconst PaletteScreen = () => {\n\tconst route = useRoute();\n\tconst navigation = useNavigation();\n\tconst { shouldEnableBottomSheetScroll } = useContext( BottomSheetContext );\n\tconst {\n\t\tlabel,\n\t\tonColorChange,\n\t\tonGradientChange,\n\t\tonColorCleared,\n\t\tcolorValue,\n\t\tdefaultSettings,\n\t\thideNavigation = false,\n\t} = route.params || {};\n\tconst { segments, isGradient } = colorsUtils;\n\tconst [ currentValue, setCurrentValue ] = useState( colorValue );\n\tconst isGradientColor = isGradient( currentValue );\n\tconst selectedSegmentIndex = isGradientColor ? 1 : 0;\n\tconst allAvailableColors = useMobileGlobalStylesColors();\n\n\tconst [ currentSegment, setCurrentSegment ] = useState(\n\t\tsegments[ selectedSegmentIndex ]\n\t);\n\tconst isGradientSegment = currentSegment === colorsUtils.segments[ 1 ];\n\tconst currentSegmentColors = ! isGradientSegment\n\t\t? defaultSettings.colors\n\t\t: defaultSettings.gradients;\n\n\tconst horizontalSeparatorStyle = usePreferredColorSchemeStyle(\n\t\tstyles.horizontalSeparator,\n\t\tstyles.horizontalSeparatorDark\n\t);\n\tconst clearButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.clearButton,\n\t\tstyles.clearButtonDark\n\t);\n\tconst selectedColorTextStyle = usePreferredColorSchemeStyle(\n\t\tstyles.colorText,\n\t\tstyles.colorTextDark\n\t);\n\n\tconst isSolidSegment = currentSegment === segments[ 0 ];\n\tconst isCustomGadientShown = ! isSolidSegment && isGradientColor;\n\n\tconst setColor = ( color ) => {\n\t\tsetCurrentValue( color );\n\t\tif ( isSolidSegment && onColorChange && onGradientChange ) {\n\t\t\tonColorChange( color );\n\t\t} else if ( isSolidSegment && onColorChange ) {\n\t\t\tonColorChange( color );\n\t\t} else if ( ! isSolidSegment && onGradientChange ) {\n\t\t\tonGradientChange( color );\n\t\t}\n\t};\n\n\tfunction onClear() {\n\t\tsetCurrentValue( undefined );\n\n\t\tif ( onColorCleared ) {\n\t\t\tonColorCleared();\n\t\t}\n\t}\n\n\tfunction onCustomPress() {\n\t\tif ( isSolidSegment ) {\n\t\t\tnavigation.navigate( colorsUtils.screens.picker, {\n\t\t\t\tcurrentValue,\n\t\t\t\tsetColor,\n\t\t\t} );\n\t\t} else {\n\t\t\tnavigation.navigate( colorsUtils.screens.gradientPicker, {\n\t\t\t\tsetColor,\n\t\t\t\tisGradientColor,\n\t\t\t\tcurrentValue,\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction getClearButton() {\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback onPress={ onClear } hitSlop={ HIT_SLOP }>\n\t\t\t\t<View style={ styles.clearButtonContainer }>\n\t\t\t\t\t<Text style={ clearButtonStyle }>{ __( 'Reset' ) }</Text>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n\n\tfunction getFooter() {\n\t\tif ( onGradientChange ) {\n\t\t\treturn (\n\t\t\t\t<SegmentedControls\n\t\t\t\t\tsegments={ segments }\n\t\t\t\t\tsegmentHandler={ setCurrentSegment }\n\t\t\t\t\tselectedIndex={ segments.indexOf( currentSegment ) }\n\t\t\t\t\taddonLeft={\n\t\t\t\t\t\tcurrentValue && (\n\t\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\taddonRight={ currentValue && getClearButton() }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<View style={ styles.footer }>\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && (\n\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t\t{ currentValue ? (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tstyle={ selectedColorTextStyle }\n\t\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t\t\tselectable\n\t\t\t\t\t>\n\t\t\t\t\t\t{ currentValue.toUpperCase() }\n\t\t\t\t\t</Text>\n\t\t\t\t) : (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tstyle={ styles.selectColorText }\n\t\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Select a color above' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && getClearButton() }\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t);\n\t}\n\treturn (\n\t\t<View>\n\t\t\t{ ! hideNavigation && (\n\t\t\t\t<NavBar>\n\t\t\t\t\t<NavBar.BackButton onPress={ navigation.goBack } />\n\t\t\t\t\t<NavBar.Heading>{ label } </NavBar.Heading>\n\t\t\t\t</NavBar>\n\t\t\t) }\n\n\t\t\t<View style={ styles.colorPalettes }>\n\t\t\t\t{ currentSegmentColors.map( ( palette, paletteKey ) => {\n\t\t\t\t\tconst paletteSettings = {\n\t\t\t\t\t\tcolors: palette.colors,\n\t\t\t\t\t\tgradients: palette.gradients,\n\t\t\t\t\t\tallColors: allAvailableColors,\n\t\t\t\t\t};\n\t\t\t\t\tconst enableCustomColor =\n\t\t\t\t\t\t! isGradientSegment &&\n\t\t\t\t\t\tpalette.name === THEME_PALETTE_NAME;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\t\tenableCustomColor={ enableCustomColor }\n\t\t\t\t\t\t\tlabel={ palette.name }\n\t\t\t\t\t\t\tkey={ paletteKey }\n\t\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\t\tactiveColor={ currentValue }\n\t\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t\t\tcurrentSegment={ currentSegment }\n\t\t\t\t\t\t\tonCustomPress={ onCustomPress }\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdefaultSettings={ paletteSettings }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</View>\n\n\t\t\t{ isCustomGadientShown && (\n\t\t\t\t<>\n\t\t\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t\t\t<PanelBody>\n\t\t\t\t\t\t<ColorControl\n\t\t\t\t\t\t\tlabel={ __( 'Customize Gradient' ) }\n\t\t\t\t\t\t\tonPress={ onCustomPress }\n\t\t\t\t\t\t\twithColorIndicator={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t{ getFooter() }\n\t\t</View>\n\t);\n};\n\nexport default PaletteScreen;\n"]}