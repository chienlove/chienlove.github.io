{"version":3,"sources":["@wordpress/components/src/font-size-picker/index.native.js"],"names":["View","useWindowDimensions","useNavigation","useState","Icon","chevronRight","check","__","sprintf","BottomSheet","getPxFromCssUnit","default","UnitControl","useCustomUnits","styles","DEFAULT_FONT_SIZE","FontSizePicker","fontSizes","disableCustomFontSizes","onChange","value","selectedValue","showSubSheet","setShowSubSheet","navigation","height","width","cssUnitOptions","fontSize","selectedPxValue","onChangeValue","goBack","selectedOption","find","option","sizePx","name","openSubSheet","navigate","SubSheet","screenName","label","units","availableUnits","undefined","map","item","index","parseFloat","nextSize"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, useWindowDimensions } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { useNavigation } from '@react-navigation/native';\nimport { useState } from '@wordpress/element';\nimport { Icon, chevronRight, check } from '@wordpress/icons';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { BottomSheet } from '@wordpress/components';\nimport { getPxFromCssUnit } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { default as UnitControl, useCustomUnits } from '../unit-control';\nimport styles from './style.scss';\n\nconst DEFAULT_FONT_SIZE = 16;\n\nfunction FontSizePicker( {\n\tfontSizes = [],\n\tdisableCustomFontSizes = false,\n\tonChange,\n\tvalue: selectedValue,\n} ) {\n\tconst [ showSubSheet, setShowSubSheet ] = useState( false );\n\tconst navigation = useNavigation();\n\n\tconst { height, width } = useWindowDimensions();\n\tconst cssUnitOptions = { height, width, fontSize: DEFAULT_FONT_SIZE };\n\t// We need to always convert to px units because the selected value\n\t// could be coming from the web where it could be stored as a different unit.\n\tconst selectedPxValue = getPxFromCssUnit( selectedValue, cssUnitOptions );\n\n\tconst onChangeValue = ( value ) => {\n\t\treturn () => {\n\t\t\tgoBack();\n\t\t\tonChange( value );\n\t\t};\n\t};\n\n\tconst selectedOption = fontSizes.find(\n\t\t( option ) => option.sizePx === selectedPxValue\n\t) ?? { name: 'Custom' };\n\n\tconst goBack = () => {\n\t\tsetShowSubSheet( false );\n\t\tnavigation.goBack();\n\t};\n\n\tconst openSubSheet = () => {\n\t\tnavigation.navigate( BottomSheet.SubSheet.screenName );\n\t\tsetShowSubSheet( true );\n\t};\n\tconst label = __( 'Font Size' );\n\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: [ 'px', 'em', 'rem' ],\n\t} );\n\n\treturn (\n\t\t<BottomSheet.SubSheet\n\t\t\tnavigationButton={\n\t\t\t\t<BottomSheet.Cell\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tseparatorType=\"none\"\n\t\t\t\t\tvalue={\n\t\t\t\t\t\tselectedValue\n\t\t\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t\t\t// translators: %1$s: Select control font size name e.g. Small, %2$s: Select control font size e.g. 12px\n\t\t\t\t\t\t\t\t\t__( '%1$s (%2$s)' ),\n\t\t\t\t\t\t\t\t\tselectedOption.name,\n\t\t\t\t\t\t\t\t\tselectedPxValue\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: __( 'Default' )\n\t\t\t\t\t}\n\t\t\t\t\tonPress={ openSubSheet }\n\t\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\t\taccessibilityLabel={ selectedOption.name }\n\t\t\t\t\taccessibilityHint={ sprintf(\n\t\t\t\t\t\t// translators: %s: Select control button label e.g. Small\n\t\t\t\t\t\t__( 'Navigates to select %s' ),\n\t\t\t\t\t\tselectedOption.name\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t<Icon icon={ chevronRight }></Icon>\n\t\t\t\t</BottomSheet.Cell>\n\t\t\t}\n\t\t\tshowSheet={ showSubSheet }\n\t\t>\n\t\t\t<>\n\t\t\t\t<BottomSheet.NavBar>\n\t\t\t\t\t<BottomSheet.NavBar.BackButton onPress={ goBack } />\n\t\t\t\t\t<BottomSheet.NavBar.Heading>\n\t\t\t\t\t\t{ label }\n\t\t\t\t\t</BottomSheet.NavBar.Heading>\n\t\t\t\t</BottomSheet.NavBar>\n\t\t\t\t<View style={ styles[ 'components-font-size-picker' ] }>\n\t\t\t\t\t<BottomSheet.Cell\n\t\t\t\t\t\tcustomActionButton\n\t\t\t\t\t\tseparatorType=\"none\"\n\t\t\t\t\t\tlabel={ __( 'Default' ) }\n\t\t\t\t\t\tonPress={ onChangeValue( undefined ) }\n\t\t\t\t\t\tleftAlign={ true }\n\t\t\t\t\t\tkey={ 'default' }\n\t\t\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\t\t\taccessibilityLabel={ __( 'Selected: Default' ) }\n\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t'Double tap to select default font size'\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t{ selectedValue === undefined && (\n\t\t\t\t\t\t\t\t<Icon icon={ check }></Icon>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</BottomSheet.Cell>\n\t\t\t\t\t{ fontSizes.map( ( item, index ) => {\n\t\t\t\t\t\t// Only display a choice that we can currenly select.\n\t\t\t\t\t\tif ( ! parseFloat( item.sizePx ) ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<BottomSheet.Cell\n\t\t\t\t\t\t\t\tcustomActionButton\n\t\t\t\t\t\t\t\tseparatorType=\"none\"\n\t\t\t\t\t\t\t\tlabel={ item.name }\n\t\t\t\t\t\t\t\tsubLabel={ item.sizePx }\n\t\t\t\t\t\t\t\tonPress={ onChangeValue( item.sizePx ) }\n\t\t\t\t\t\t\t\tleftAlign={ true }\n\t\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\t\t\t\t\taccessibilityLabel={\n\t\t\t\t\t\t\t\t\titem.sizePx === selectedValue\n\t\t\t\t\t\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t\t\t\t\t\t// translators: %s: Select font size option value e.g: \"Selected: Large\".\n\t\t\t\t\t\t\t\t\t\t\t\t__( 'Selected: %s' ),\n\t\t\t\t\t\t\t\t\t\t\t\titem.name\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: item.name\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t\t\t'Double tap to select font size'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t\t\t{ item.sizePx === selectedPxValue && (\n\t\t\t\t\t\t\t\t\t\t<Icon icon={ check }></Icon>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t</BottomSheet.Cell>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t\t{ ! disableCustomFontSizes && (\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\tlabel={ __( 'Custom' ) }\n\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\tmax={ 200 }\n\t\t\t\t\t\t\tstep={ 1 }\n\t\t\t\t\t\t\tvalue={ selectedValue }\n\t\t\t\t\t\t\tonChange={ ( nextSize ) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t0 === parseFloat( nextSize ) ||\n\t\t\t\t\t\t\t\t\t! nextSize\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tonChange( undefined );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tonChange( nextSize );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t</>\n\t\t</BottomSheet.SubSheet>\n\t);\n}\n\nexport default FontSizePicker;\n"]}