{"version":3,"sources":["@wordpress/components/src/color-picker/use-deprecated-props.ts"],"names":["colord","memoize","useCallback","isLegacyProps","props","onChangeComplete","disableAlpha","color","hex","getColorFromLegacyProps","undefined","transformColorStringToLegacyColor","colordColor","toHex","rgb","toRgb","hsv","toHsv","hsl","toHsl","source","oldHue","h","useDeprecatedProps","legacyChangeHandler","enableAlpha","onChange"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,MAAT,QAAuB,QAAvB;AACA,OAAOC,OAAP,MAAoB,QAApB;AAEA;AACA;AACA;;AACA,SAASC,WAAT,QAA4B,oBAA5B;AAEA;AACA;AACA;;AAGA,SAASC,aAAT,CAAwBC,KAAxB,EAA2D;AAAA;;AAC1D,SACC,OAAOA,KAAK,CAACC,gBAAb,KAAkC,WAAlC,IACA,OAAOD,KAAK,CAACE,YAAb,KAA8B,WAD9B,IAEA,wBAAOF,KAAK,CAACG,KAAb,iDAAO,aAAaC,GAApB,MAA4B,QAH7B;AAKA;;AAED,SAASC,uBAAT,CACCF,KADD,EAEsB;AACrB,MAAKA,KAAK,KAAKG,SAAf,EAA2B;AAE3B,MAAK,OAAOH,KAAP,KAAiB,QAAtB,EAAiC,OAAOA,KAAP;AAEjC,MAAKA,KAAK,CAACC,GAAX,EAAiB,OAAOD,KAAK,CAACC,GAAb;AAEjB,SAAOE,SAAP;AACA;;AAED,MAAMC,iCAAiC,GAAGV,OAAO,CAC9CM,KAAF,IAAkC;AACjC,QAAMK,WAAW,GAAGZ,MAAM,CAAEO,KAAF,CAA1B;AACA,QAAMC,GAAG,GAAGI,WAAW,CAACC,KAAZ,EAAZ;AACA,QAAMC,GAAG,GAAGF,WAAW,CAACG,KAAZ,EAAZ;AACA,QAAMC,GAAG,GAAGJ,WAAW,CAACK,KAAZ,EAAZ;AACA,QAAMC,GAAG,GAAGN,WAAW,CAACO,KAAZ,EAAZ;AAEA,SAAO;AACNX,IAAAA,GADM;AAENM,IAAAA,GAFM;AAGNE,IAAAA,GAHM;AAINE,IAAAA,GAJM;AAKNE,IAAAA,MAAM,EAAE,KALF;AAMNC,IAAAA,MAAM,EAAEH,GAAG,CAACI;AANN,GAAP;AAQA,CAhB+C,CAAjD;AAmBA,OAAO,SAASC,kBAAT,CACNnB,KADM,EAEa;AACnB,QAAM;AAAEC,IAAAA;AAAF,MAAuBD,KAA7B;AACA,QAAMoB,mBAAmB,GAAGtB,WAAW,CACpCK,KAAF,IAAqB;AACpBF,IAAAA,gBAAgB,CAAEM,iCAAiC,CAAEJ,KAAF,CAAnC,CAAhB;AACA,GAHqC,EAItC,CAAEF,gBAAF,CAJsC,CAAvC;;AAMA,MAAKF,aAAa,CAAEC,KAAF,CAAlB,EAA8B;AAC7B,WAAO;AACNG,MAAAA,KAAK,EAAEE,uBAAuB,CAAEL,KAAK,CAACG,KAAR,CADxB;AAENkB,MAAAA,WAAW,EAAE,CAAErB,KAAK,CAACE,YAFf;AAGNoB,MAAAA,QAAQ,EAAEF;AAHJ,KAAP;AAKA;;AACD,SAAO,EACN,GAAGpB,KADG;AAENG,IAAAA,KAAK,EAAEH,KAAK,CAACG,KAFP;AAGNkB,IAAAA,WAAW,EAAIrB,KAAF,CAA8BqB,WAHrC;AAINC,IAAAA,QAAQ,EAAItB,KAAF,CAA8BsB;AAJlC,GAAP;AAMA","sourcesContent":["/**\n * External dependencies\n */\nimport { colord } from 'colord';\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { ColorPickerProps, LegacyColor, LegacyProps } from './types';\n\nfunction isLegacyProps( props: any ): props is LegacyProps {\n\treturn (\n\t\ttypeof props.onChangeComplete !== 'undefined' ||\n\t\ttypeof props.disableAlpha !== 'undefined' ||\n\t\ttypeof props.color?.hex === 'string'\n\t);\n}\n\nfunction getColorFromLegacyProps(\n\tcolor: LegacyProps[ 'color' ]\n): string | undefined {\n\tif ( color === undefined ) return;\n\n\tif ( typeof color === 'string' ) return color;\n\n\tif ( color.hex ) return color.hex;\n\n\treturn undefined;\n}\n\nconst transformColorStringToLegacyColor = memoize(\n\t( color: string ): LegacyColor => {\n\t\tconst colordColor = colord( color );\n\t\tconst hex = colordColor.toHex();\n\t\tconst rgb = colordColor.toRgb();\n\t\tconst hsv = colordColor.toHsv();\n\t\tconst hsl = colordColor.toHsl();\n\n\t\treturn {\n\t\t\thex,\n\t\t\trgb,\n\t\t\thsv,\n\t\t\thsl,\n\t\t\tsource: 'hex',\n\t\t\toldHue: hsl.h,\n\t\t};\n\t}\n);\n\nexport function useDeprecatedProps(\n\tprops: LegacyProps | ColorPickerProps\n): ColorPickerProps {\n\tconst { onChangeComplete } = props as LegacyProps;\n\tconst legacyChangeHandler = useCallback(\n\t\t( color: string ) => {\n\t\t\tonChangeComplete( transformColorStringToLegacyColor( color ) );\n\t\t},\n\t\t[ onChangeComplete ]\n\t);\n\tif ( isLegacyProps( props ) ) {\n\t\treturn {\n\t\t\tcolor: getColorFromLegacyProps( props.color ),\n\t\t\tenableAlpha: ! props.disableAlpha,\n\t\t\tonChange: legacyChangeHandler,\n\t\t};\n\t}\n\treturn {\n\t\t...props,\n\t\tcolor: props.color as ColorPickerProps[ 'color' ],\n\t\tenableAlpha: ( props as ColorPickerProps ).enableAlpha,\n\t\tonChange: ( props as ColorPickerProps ).onChange,\n\t};\n}\n"]}