{"version":3,"sources":["@wordpress/components/src/color-picker/index.native.js"],"names":["View","Text","TouchableWithoutFeedback","Platform","HsvColorPicker","colord","extend","namesPlugin","useState","useEffect","__","BottomSheet","usePreferredColorSchemeStyle","Icon","check","close","styles","ColorPicker","shouldEnableBottomSheetScroll","shouldEnableBottomSheetMaxHeight","isBottomSheetContentScrolling","setColor","activeColor","isGradientColor","onNavigationBack","onHandleClosingBottomSheet","onBottomSheetClosed","onHandleHardwareButtonPress","bottomLabelText","isIOS","OS","hitSlop","top","bottom","left","right","h","initH","s","initS","v","initV","toHsv","hue","setHue","sat","setSaturation","val","setValue","savedColor","paddingLeft","spacing","height","pickerHeight","borderRadius","picker","pickerPointerSize","pickerPointer","pickerWidth","getWidth","applyButtonStyle","applyButton","applyButtonDark","cancelButtonStyle","cancelButton","cancelButtonDark","colorTextStyle","colorText","colorTextDark","selectColorTextStyle","selectColorText","selectColorTextDark","footerStyle","footer","footerDark","combineToHex","toHex","currentColor","updateColor","saturation","value","undefined","onButtonPress","action","width","toUpperCase"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback, Platform } from 'react-native';\nimport HsvColorPicker from 'react-native-hsv-color-picker';\nimport { colord, extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { BottomSheet } from '@wordpress/components';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { Icon, check, close } from '@wordpress/icons';\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nextend( [ namesPlugin ] );\n\nfunction ColorPicker( {\n\tshouldEnableBottomSheetScroll,\n\tshouldEnableBottomSheetMaxHeight,\n\tisBottomSheetContentScrolling,\n\tsetColor,\n\tactiveColor,\n\tisGradientColor,\n\tonNavigationBack,\n\tonHandleClosingBottomSheet,\n\tonBottomSheetClosed,\n\tonHandleHardwareButtonPress,\n\tbottomLabelText,\n} ) {\n\tconst isIOS = Platform.OS === 'ios';\n\tconst hitSlop = { top: 22, bottom: 22, left: 22, right: 22 };\n\tconst {\n\t\th: initH,\n\t\ts: initS,\n\t\tv: initV,\n\t} = ! isGradientColor && activeColor\n\t\t? colord( activeColor ).toHsv()\n\t\t: { h: 0, s: 50, v: 50 };\n\tconst [ hue, setHue ] = useState( initH );\n\tconst [ sat, setSaturation ] = useState( initS / 100 );\n\tconst [ val, setValue ] = useState( initV / 100 );\n\tconst [ savedColor ] = useState( activeColor );\n\n\tconst {\n\t\tpaddingLeft: spacing,\n\t\theight: pickerHeight,\n\t\tborderRadius,\n\t} = styles.picker;\n\tconst { height: pickerPointerSize } = styles.pickerPointer;\n\tconst pickerWidth = BottomSheet.getWidth() - 2 * spacing;\n\n\tconst applyButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.applyButton,\n\t\tstyles.applyButtonDark\n\t);\n\tconst cancelButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.cancelButton,\n\t\tstyles.cancelButtonDark\n\t);\n\tconst colorTextStyle = usePreferredColorSchemeStyle(\n\t\tstyles.colorText,\n\t\tstyles.colorTextDark\n\t);\n\tconst selectColorTextStyle = usePreferredColorSchemeStyle(\n\t\tstyles.selectColorText,\n\t\tstyles.selectColorTextDark\n\t);\n\tconst footerStyle = usePreferredColorSchemeStyle(\n\t\tstyles.footer,\n\t\tstyles.footerDark\n\t);\n\n\tconst combineToHex = ( h = hue, s = sat, v = val ) =>\n\t\tcolord( { h, s: s * 100, v: v * 100 } ).toHex();\n\n\tconst currentColor = combineToHex();\n\n\tconst updateColor = ( { hue: h, saturation: s, value: v } ) => {\n\t\tif ( h !== undefined ) setHue( h );\n\t\tif ( s !== undefined ) setSaturation( s );\n\t\tif ( v !== undefined ) setValue( v );\n\t\tsetColor( combineToHex( h, s, v ) );\n\t};\n\n\tuseEffect( () => {\n\t\tshouldEnableBottomSheetMaxHeight( false );\n\t\tonHandleClosingBottomSheet( () => {\n\t\t\tif ( savedColor ) {\n\t\t\t\tsetColor( savedColor );\n\t\t\t}\n\t\t\tif ( onBottomSheetClosed ) {\n\t\t\t\tonBottomSheetClosed();\n\t\t\t}\n\t\t} );\n\t\tif ( onHandleHardwareButtonPress ) {\n\t\t\tonHandleHardwareButtonPress( onButtonPress );\n\t\t}\n\t\t// TODO: Revisit this to discover if there's a good reason for omitting\n\t\t// the hookâ€™s dependencies and running it a single time. Ideally there\n\t\t// may be a way to refactor and obviate the disabled lint rule. If not,\n\t\t// this comment should be replaced by one that explains the reasoning.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [] );\n\n\tfunction onButtonPress( action ) {\n\t\tonNavigationBack();\n\t\tonHandleClosingBottomSheet( null );\n\t\tshouldEnableBottomSheetMaxHeight( true );\n\t\tsetColor( action === 'apply' ? currentColor : savedColor );\n\t\tif ( onBottomSheetClosed ) {\n\t\t\tonBottomSheetClosed();\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<HsvColorPicker\n\t\t\t\thuePickerHue={ hue }\n\t\t\t\tonHuePickerDragMove={ updateColor }\n\t\t\t\tonHuePickerPress={\n\t\t\t\t\t! isBottomSheetContentScrolling && updateColor\n\t\t\t\t}\n\t\t\t\tsatValPickerHue={ hue }\n\t\t\t\tsatValPickerSaturation={ sat }\n\t\t\t\tsatValPickerValue={ val }\n\t\t\t\tonSatValPickerDragMove={ updateColor }\n\t\t\t\tonSatValPickerPress={\n\t\t\t\t\t! isBottomSheetContentScrolling && updateColor\n\t\t\t\t}\n\t\t\t\tonSatValPickerDragStart={ () => {\n\t\t\t\t\tshouldEnableBottomSheetScroll( false );\n\t\t\t\t} }\n\t\t\t\tonSatValPickerDragEnd={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( true )\n\t\t\t\t}\n\t\t\t\tonHuePickerDragStart={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( false )\n\t\t\t\t}\n\t\t\t\tonHuePickerDragEnd={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( true )\n\t\t\t\t}\n\t\t\t\thuePickerBarWidth={ pickerWidth }\n\t\t\t\thuePickerBarHeight={ pickerPointerSize / 2 }\n\t\t\t\tsatValPickerSize={ {\n\t\t\t\t\twidth: pickerWidth,\n\t\t\t\t\theight: pickerHeight,\n\t\t\t\t} }\n\t\t\t\tsatValPickerSliderSize={ pickerPointerSize * 2 }\n\t\t\t\tsatValPickerBorderRadius={ borderRadius }\n\t\t\t\thuePickerBorderRadius={ borderRadius }\n\t\t\t/>\n\t\t\t<View style={ footerStyle }>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\tonPress={ () => onButtonPress( 'cancel' ) }\n\t\t\t\t\thitSlop={ hitSlop }\n\t\t\t\t>\n\t\t\t\t\t<View>\n\t\t\t\t\t\t{ isIOS ? (\n\t\t\t\t\t\t\t<Text style={ cancelButtonStyle }>\n\t\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\tstyle={ cancelButtonStyle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t{ bottomLabelText ? (\n\t\t\t\t\t<Text style={ selectColorTextStyle }>\n\t\t\t\t\t\t{ bottomLabelText }\n\t\t\t\t\t</Text>\n\t\t\t\t) : (\n\t\t\t\t\t<Text style={ colorTextStyle } selectable>\n\t\t\t\t\t\t{ currentColor.toUpperCase() }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\tonPress={ () => onButtonPress( 'apply' ) }\n\t\t\t\t\thitSlop={ hitSlop }\n\t\t\t\t>\n\t\t\t\t\t<View>\n\t\t\t\t\t\t{ isIOS ? (\n\t\t\t\t\t\t\t<Text style={ applyButtonStyle }>\n\t\t\t\t\t\t\t\t{ __( 'Apply' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ check }\n\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\tstyle={ applyButtonStyle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</View>\n\t\t</>\n\t);\n}\n\nexport { ColorPicker };\n"]}