{"version":3,"sources":["@wordpress/components/src/style-provider/index.tsx"],"names":["CacheProvider","createCache","memoize","uuid","uuidCache","Set","memoizedCreateCacheWithContainer","container","key","v4","replace","has","add","StyleProvider","props","children","document","cache","head"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,aAAT,QAA8B,gBAA9B;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAOC,OAAP,MAAoB,QAApB;AACA,OAAO,KAAKC,IAAZ,MAAsB,MAAtB;AAEA;AACA;AACA;;AAGA,MAAMC,SAAS,GAAG,IAAIC,GAAJ,EAAlB;AAEA,MAAMC,gCAAgC,GAAGJ,OAAO,CAC7CK,SAAF,IAA8B;AAC7B;AACA;AACA,MAAIC,GAAG,GAAGL,IAAI,CAACM,EAAL,GAAUC,OAAV,CAAmB,QAAnB,EAA6B,EAA7B,CAAV;;AACA,SAAQN,SAAS,CAACO,GAAV,CAAeH,GAAf,CAAR,EAA+B;AAC9BA,IAAAA,GAAG,GAAGL,IAAI,CAACM,EAAL,GAAUC,OAAV,CAAmB,QAAnB,EAA6B,EAA7B,CAAN;AACA;;AACDN,EAAAA,SAAS,CAACQ,GAAV,CAAeJ,GAAf;AACA,SAAOP,WAAW,CAAE;AAAEM,IAAAA,SAAF;AAAaC,IAAAA;AAAb,GAAF,CAAlB;AACA,CAV8C,CAAhD;AAaA,OAAO,SAASK,aAAT,CAAwBC,KAAxB,EAAoD;AAC1D,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAyBF,KAA/B;;AAEA,MAAK,CAAEE,QAAP,EAAkB;AACjB,WAAO,IAAP;AACA;;AAED,QAAMC,KAAK,GAAGX,gCAAgC,CAAEU,QAAQ,CAACE,IAAX,CAA9C;AAEA,SAAO,cAAC,aAAD;AAAe,IAAA,KAAK,EAAGD;AAAvB,KAAiCF,QAAjC,CAAP;AACA;AAED,eAAeF,aAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { CacheProvider } from '@emotion/react';\nimport createCache from '@emotion/cache';\nimport memoize from 'memize';\nimport * as uuid from 'uuid';\n\n/**\n * Internal dependencies\n */\nimport type { StyleProviderProps } from './types';\n\nconst uuidCache = new Set();\n\nconst memoizedCreateCacheWithContainer = memoize(\n\t( container: HTMLElement ) => {\n\t\t// Emotion only accepts alphabetical and hyphenated keys so we just\n\t\t// strip the numbers from the UUID. It _should_ be fine.\n\t\tlet key = uuid.v4().replace( /[0-9]/g, '' );\n\t\twhile ( uuidCache.has( key ) ) {\n\t\t\tkey = uuid.v4().replace( /[0-9]/g, '' );\n\t\t}\n\t\tuuidCache.add( key );\n\t\treturn createCache( { container, key } );\n\t}\n);\n\nexport function StyleProvider( props: StyleProviderProps ) {\n\tconst { children, document } = props;\n\n\tif ( ! document ) {\n\t\treturn null;\n\t}\n\n\tconst cache = memoizedCreateCacheWithContainer( document.head );\n\n\treturn <CacheProvider value={ cache }>{ children }</CacheProvider>;\n}\n\nexport default StyleProvider;\n"]}