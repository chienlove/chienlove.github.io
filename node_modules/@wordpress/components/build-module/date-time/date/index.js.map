{"version":3,"sources":["@wordpress/components/src/date-time/date/index.tsx"],"names":["useLilius","format","isSameDay","subMonths","addMonths","startOfDay","isEqual","addDays","subWeeks","addWeeks","isSameMonth","startOfWeek","endOfWeek","__","_n","sprintf","isRTL","arrowLeft","arrowRight","dateI18n","getSettings","useState","useRef","useEffect","Wrapper","Navigator","NavigatorHeading","Calendar","DayOfWeek","DayButton","inputToDate","Button","TIMEZONELESS_FORMAT","DatePicker","currentDate","onChange","events","isInvalidDate","onMonthPreviewed","weekStartsOn","date","Date","calendar","viewing","setSelected","setViewing","isSelected","viewPreviousMonth","viewNextMonth","selected","focusable","setFocusable","isFocusWithinCalendar","setIsFocusWithinCalendar","prevCurrentDate","setPrevCurrentDate","getTimezoneOffset","map","day","toString","week","index","filter","event","length","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","nextFocusable","key","preventDefault","Day","column","isFocusable","isFocusAllowed","isToday","isInvalid","numEvents","onClick","onKeyDown","ref","current","focus","getDayLabel","formats","localizedDate"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { useLilius } from 'use-lilius';\nimport {\n\tformat,\n\tisSameDay,\n\tsubMonths,\n\taddMonths,\n\tstartOfDay,\n\tisEqual,\n\taddDays,\n\tsubWeeks,\n\taddWeeks,\n\tisSameMonth,\n\tstartOfWeek,\n\tendOfWeek,\n} from 'date-fns';\nimport type { KeyboardEventHandler } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf, isRTL } from '@wordpress/i18n';\nimport { arrowLeft, arrowRight } from '@wordpress/icons';\nimport { dateI18n, getSettings } from '@wordpress/date';\nimport { useState, useRef, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { DatePickerProps } from '../types';\nimport {\n\tWrapper,\n\tNavigator,\n\tNavigatorHeading,\n\tCalendar,\n\tDayOfWeek,\n\tDayButton,\n} from './styles';\nimport { inputToDate } from '../utils';\nimport Button from '../../button';\nimport { TIMEZONELESS_FORMAT } from '../constants';\n\n/**\n * DatePicker is a React component that renders a calendar for date selection.\n *\n * ```jsx\n * import { DatePicker } from '@wordpress/components';\n * import { useState } from '@wordpress/element';\n *\n * const MyDatePicker = () => {\n *   const [ date, setDate ] = useState( new Date() );\n *\n *   return (\n *     <DatePicker\n *       currentDate={ date }\n *       onChange={ ( newDate ) => setDate( newDate ) }\n *     />\n *   );\n * };\n * ```\n */\nexport function DatePicker( {\n\tcurrentDate,\n\tonChange,\n\tevents = [],\n\tisInvalidDate,\n\tonMonthPreviewed,\n\tstartOfWeek: weekStartsOn = 0,\n}: DatePickerProps ) {\n\tconst date = currentDate ? inputToDate( currentDate ) : new Date();\n\n\tconst {\n\t\tcalendar,\n\t\tviewing,\n\t\tsetSelected,\n\t\tsetViewing,\n\t\tisSelected,\n\t\tviewPreviousMonth,\n\t\tviewNextMonth,\n\t} = useLilius( {\n\t\tselected: [ startOfDay( date ) ],\n\t\tviewing: startOfDay( date ),\n\t\tweekStartsOn,\n\t} );\n\n\t// Used to implement a roving tab index. Tracks the day that receives focus\n\t// when the user tabs into the calendar.\n\tconst [ focusable, setFocusable ] = useState( startOfDay( date ) );\n\n\t// Allows us to only programmatically focus() a day when focus was already\n\t// within the calendar. This stops us stealing focus from e.g. a TimePicker\n\t// input.\n\tconst [ isFocusWithinCalendar, setIsFocusWithinCalendar ] =\n\t\tuseState( false );\n\n\t// Update internal state when currentDate prop changes.\n\tconst [ prevCurrentDate, setPrevCurrentDate ] = useState( currentDate );\n\tif ( currentDate !== prevCurrentDate ) {\n\t\tsetPrevCurrentDate( currentDate );\n\t\tsetSelected( [ startOfDay( date ) ] );\n\t\tsetViewing( startOfDay( date ) );\n\t\tsetFocusable( startOfDay( date ) );\n\t}\n\n\treturn (\n\t\t<Wrapper\n\t\t\tclassName=\"components-datetime__date\"\n\t\t\trole=\"application\"\n\t\t\taria-label={ __( 'Calendar' ) }\n\t\t>\n\t\t\t<Navigator>\n\t\t\t\t<Button\n\t\t\t\t\ticon={ isRTL() ? arrowRight : arrowLeft }\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\taria-label={ __( 'View previous month' ) }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tviewPreviousMonth();\n\t\t\t\t\t\tsetFocusable( subMonths( focusable, 1 ) );\n\t\t\t\t\t\tonMonthPreviewed?.(\n\t\t\t\t\t\t\tformat(\n\t\t\t\t\t\t\t\tsubMonths( viewing, 1 ),\n\t\t\t\t\t\t\t\tTIMEZONELESS_FORMAT\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<NavigatorHeading level={ 3 }>\n\t\t\t\t\t<strong>\n\t\t\t\t\t\t{ dateI18n(\n\t\t\t\t\t\t\t'F',\n\t\t\t\t\t\t\tviewing,\n\t\t\t\t\t\t\t-viewing.getTimezoneOffset()\n\t\t\t\t\t\t) }\n\t\t\t\t\t</strong>{ ' ' }\n\t\t\t\t\t{ dateI18n( 'Y', viewing, -viewing.getTimezoneOffset() ) }\n\t\t\t\t</NavigatorHeading>\n\t\t\t\t<Button\n\t\t\t\t\ticon={ isRTL() ? arrowLeft : arrowRight }\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\taria-label={ __( 'View next month' ) }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tviewNextMonth();\n\t\t\t\t\t\tsetFocusable( addMonths( focusable, 1 ) );\n\t\t\t\t\t\tonMonthPreviewed?.(\n\t\t\t\t\t\t\tformat(\n\t\t\t\t\t\t\t\taddMonths( viewing, 1 ),\n\t\t\t\t\t\t\t\tTIMEZONELESS_FORMAT\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</Navigator>\n\t\t\t<Calendar\n\t\t\t\tonFocus={ () => setIsFocusWithinCalendar( true ) }\n\t\t\t\tonBlur={ () => setIsFocusWithinCalendar( false ) }\n\t\t\t>\n\t\t\t\t{ calendar[ 0 ][ 0 ].map( ( day ) => (\n\t\t\t\t\t<DayOfWeek key={ day.toString() }>\n\t\t\t\t\t\t{ dateI18n( 'D', day, -day.getTimezoneOffset() ) }\n\t\t\t\t\t</DayOfWeek>\n\t\t\t\t) ) }\n\t\t\t\t{ calendar[ 0 ].map( ( week ) =>\n\t\t\t\t\tweek.map( ( day, index ) => {\n\t\t\t\t\t\tif ( ! isSameMonth( day, viewing ) ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Day\n\t\t\t\t\t\t\t\tkey={ day.toString() }\n\t\t\t\t\t\t\t\tday={ day }\n\t\t\t\t\t\t\t\tcolumn={ index + 1 }\n\t\t\t\t\t\t\t\tisSelected={ isSelected( day ) }\n\t\t\t\t\t\t\t\tisFocusable={ isEqual( day, focusable ) }\n\t\t\t\t\t\t\t\tisFocusAllowed={ isFocusWithinCalendar }\n\t\t\t\t\t\t\t\tisToday={ isSameDay( day, new Date() ) }\n\t\t\t\t\t\t\t\tisInvalid={\n\t\t\t\t\t\t\t\t\tisInvalidDate ? isInvalidDate( day ) : false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnumEvents={\n\t\t\t\t\t\t\t\t\tevents.filter( ( event ) =>\n\t\t\t\t\t\t\t\t\t\tisSameDay( event.date, day )\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tsetSelected( [ day ] );\n\t\t\t\t\t\t\t\t\tsetFocusable( day );\n\t\t\t\t\t\t\t\t\tonChange?.(\n\t\t\t\t\t\t\t\t\t\tformat(\n\t\t\t\t\t\t\t\t\t\t\t// Don't change the selected date's time fields.\n\t\t\t\t\t\t\t\t\t\t\tnew Date(\n\t\t\t\t\t\t\t\t\t\t\t\tday.getFullYear(),\n\t\t\t\t\t\t\t\t\t\t\t\tday.getMonth(),\n\t\t\t\t\t\t\t\t\t\t\t\tday.getDate(),\n\t\t\t\t\t\t\t\t\t\t\t\tdate.getHours(),\n\t\t\t\t\t\t\t\t\t\t\t\tdate.getMinutes(),\n\t\t\t\t\t\t\t\t\t\t\t\tdate.getSeconds(),\n\t\t\t\t\t\t\t\t\t\t\t\tdate.getMilliseconds()\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tTIMEZONELESS_FORMAT\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\t\t\t\t\tlet nextFocusable;\n\t\t\t\t\t\t\t\t\tif ( event.key === 'ArrowLeft' ) {\n\t\t\t\t\t\t\t\t\t\tnextFocusable = addDays(\n\t\t\t\t\t\t\t\t\t\t\tday,\n\t\t\t\t\t\t\t\t\t\t\tisRTL() ? 1 : -1\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( event.key === 'ArrowRight' ) {\n\t\t\t\t\t\t\t\t\t\tnextFocusable = addDays(\n\t\t\t\t\t\t\t\t\t\t\tday,\n\t\t\t\t\t\t\t\t\t\t\tisRTL() ? -1 : 1\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( event.key === 'ArrowUp' ) {\n\t\t\t\t\t\t\t\t\t\tnextFocusable = subWeeks( day, 1 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( event.key === 'ArrowDown' ) {\n\t\t\t\t\t\t\t\t\t\tnextFocusable = addWeeks( day, 1 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( event.key === 'PageUp' ) {\n\t\t\t\t\t\t\t\t\t\tnextFocusable = subMonths( day, 1 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( event.key === 'PageDown' ) {\n\t\t\t\t\t\t\t\t\t\tnextFocusable = addMonths( day, 1 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( event.key === 'Home' ) {\n\t\t\t\t\t\t\t\t\t\tnextFocusable = startOfWeek( day );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( event.key === 'End' ) {\n\t\t\t\t\t\t\t\t\t\tnextFocusable = startOfDay(\n\t\t\t\t\t\t\t\t\t\t\tendOfWeek( day )\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( nextFocusable ) {\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\t\tsetFocusable( nextFocusable );\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t! isSameMonth(\n\t\t\t\t\t\t\t\t\t\t\t\tnextFocusable,\n\t\t\t\t\t\t\t\t\t\t\t\tviewing\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tsetViewing( nextFocusable );\n\t\t\t\t\t\t\t\t\t\t\tonMonthPreviewed?.(\n\t\t\t\t\t\t\t\t\t\t\t\tformat(\n\t\t\t\t\t\t\t\t\t\t\t\t\tnextFocusable,\n\t\t\t\t\t\t\t\t\t\t\t\t\tTIMEZONELESS_FORMAT\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t} )\n\t\t\t\t) }\n\t\t\t</Calendar>\n\t\t</Wrapper>\n\t);\n}\n\ntype DayProps = {\n\tday: Date;\n\tcolumn: number;\n\tisSelected: boolean;\n\tisFocusable: boolean;\n\tisFocusAllowed: boolean;\n\tisToday: boolean;\n\tnumEvents: number;\n\tisInvalid: boolean;\n\tonClick: () => void;\n\tonKeyDown: KeyboardEventHandler;\n};\n\nfunction Day( {\n\tday,\n\tcolumn,\n\tisSelected,\n\tisFocusable,\n\tisFocusAllowed,\n\tisToday,\n\tisInvalid,\n\tnumEvents,\n\tonClick,\n\tonKeyDown,\n}: DayProps ) {\n\tconst ref = useRef< HTMLButtonElement >();\n\n\t// Focus the day when it becomes focusable, e.g. because an arrow key is\n\t// pressed. Only do this if focus is allowed - this stops us stealing focus\n\t// from e.g. a TimePicker input.\n\tuseEffect( () => {\n\t\tif ( ref.current && isFocusable && isFocusAllowed ) {\n\t\t\tref.current.focus();\n\t\t}\n\t\t// isFocusAllowed is not a dep as there is no point calling focus() on\n\t\t// an already focused element.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ isFocusable ] );\n\n\treturn (\n\t\t<DayButton\n\t\t\tref={ ref }\n\t\t\tclassName=\"components-datetime__date__day\" // Unused, for backwards compatibility.\n\t\t\tdisabled={ isInvalid }\n\t\t\ttabIndex={ isFocusable ? 0 : -1 }\n\t\t\taria-label={ getDayLabel( day, isSelected, numEvents ) }\n\t\t\tcolumn={ column }\n\t\t\tisSelected={ isSelected }\n\t\t\tisToday={ isToday }\n\t\t\thasEvents={ numEvents > 0 }\n\t\t\tonClick={ onClick }\n\t\t\tonKeyDown={ onKeyDown }\n\t\t>\n\t\t\t{ dateI18n( 'j', day, -day.getTimezoneOffset() ) }\n\t\t</DayButton>\n\t);\n}\n\nfunction getDayLabel( date: Date, isSelected: boolean, numEvents: number ) {\n\tconst { formats } = getSettings();\n\tconst localizedDate = dateI18n(\n\t\tformats.date,\n\t\tdate,\n\t\t-date.getTimezoneOffset()\n\t);\n\tif ( isSelected && numEvents > 0 ) {\n\t\treturn sprintf(\n\t\t\t// translators: 1: The calendar date. 2: Number of events on the calendar date.\n\t\t\t_n(\n\t\t\t\t'%1$s. Selected. There is %2$d event',\n\t\t\t\t'%1$s. Selected. There are %2$d events',\n\t\t\t\tnumEvents\n\t\t\t),\n\t\t\tlocalizedDate,\n\t\t\tnumEvents\n\t\t);\n\t} else if ( isSelected ) {\n\t\treturn sprintf(\n\t\t\t// translators: %s: The calendar date.\n\t\t\t__( '%1$s. Selected' ),\n\t\t\tlocalizedDate\n\t\t);\n\t} else if ( numEvents > 0 ) {\n\t\treturn sprintf(\n\t\t\t// translators: 1: The calendar date. 2: Number of events on the calendar date.\n\t\t\t_n(\n\t\t\t\t'%1$s. There is %2$d event',\n\t\t\t\t'%1$s. There are %2$d events',\n\t\t\t\tnumEvents\n\t\t\t),\n\t\t\tlocalizedDate,\n\t\t\tnumEvents\n\t\t);\n\t}\n\treturn localizedDate;\n}\n\nexport default DatePicker;\n"]}