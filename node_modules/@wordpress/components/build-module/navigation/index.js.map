{"version":3,"sources":["@wordpress/components/src/navigation/index.tsx"],"names":["classnames","useEffect","useRef","useState","isRTL","getAnimateClassName","ROOT_MENU","NavigationContext","NavigationUI","useCreateNavigationTree","noop","Navigation","activeItem","activeMenu","children","className","onActivateMenu","menu","setMenu","slideOrigin","setSlideOrigin","navigationTree","defaultSlideOrigin","setActiveMenu","menuId","slideInOrigin","getMenu","isMounted","current","context","classes","animateClassName","type","origin","undefined"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { getAnimateClassName } from '../animate';\nimport { ROOT_MENU } from './constants';\nimport { NavigationContext } from './context';\nimport { NavigationUI } from './styles/navigation-styles';\nimport { useCreateNavigationTree } from './use-create-navigation-tree';\n\nimport type {\n\tNavigationProps,\n\tNavigationContext as NavigationContextType,\n} from './types';\n\nconst noop = () => {};\n\n/**\n * Render a navigation list with optional groupings and hierarchy.\n *\n * @example\n * ```jsx\n * import {\n *   __experimentalNavigation as Navigation,\n *   __experimentalNavigationGroup as NavigationGroup,\n *   __experimentalNavigationItem as NavigationItem,\n *   __experimentalNavigationMenu as NavigationMenu,\n * } from '@wordpress/components';\n *\n * const MyNavigation = () => (\n *   <Navigation>\n *     <NavigationMenu title=\"Home\">\n *       <NavigationGroup title=\"Group 1\">\n *         <NavigationItem item=\"item-1\" title=\"Item 1\" />\n *         <NavigationItem item=\"item-2\" title=\"Item 2\" />\n *       </NavigationGroup>\n *       <NavigationGroup title=\"Group 2\">\n *         <NavigationItem\n *           item=\"item-3\"\n *           navigateToMenu=\"category\"\n *           title=\"Category\"\n *         />\n *       </NavigationGroup>\n *     </NavigationMenu>\n *\n *     <NavigationMenu\n *       backButtonLabel=\"Home\"\n *       menu=\"category\"\n *       parentMenu=\"root\"\n *       title=\"Category\"\n *     >\n *       <NavigationItem badge=\"1\" item=\"child-1\" title=\"Child 1\" />\n *       <NavigationItem item=\"child-2\" title=\"Child 2\" />\n *     </NavigationMenu>\n *   </Navigation>\n * );\n * ```\n */\nexport function Navigation( {\n\tactiveItem,\n\tactiveMenu = ROOT_MENU,\n\tchildren,\n\tclassName,\n\tonActivateMenu = noop,\n}: NavigationProps ) {\n\tconst [ menu, setMenu ] = useState( activeMenu );\n\tconst [ slideOrigin, setSlideOrigin ] = useState< 'left' | 'right' >();\n\tconst navigationTree = useCreateNavigationTree();\n\tconst defaultSlideOrigin = isRTL() ? 'right' : 'left';\n\n\tconst setActiveMenu: NavigationContextType[ 'setActiveMenu' ] = (\n\t\tmenuId,\n\t\tslideInOrigin = defaultSlideOrigin\n\t) => {\n\t\tif ( ! navigationTree.getMenu( menuId ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetSlideOrigin( slideInOrigin );\n\t\tsetMenu( menuId );\n\t\tonActivateMenu( menuId );\n\t};\n\n\t// Used to prevent the sliding animation on mount\n\tconst isMounted = useRef( false );\n\tuseEffect( () => {\n\t\tif ( ! isMounted.current ) {\n\t\t\tisMounted.current = true;\n\t\t}\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( activeMenu !== menu ) {\n\t\t\tsetActiveMenu( activeMenu );\n\t\t}\n\t\t// Ignore exhaustive-deps here, as it would require either a larger refactor or some questionable workarounds.\n\t\t// See https://github.com/WordPress/gutenberg/pull/41612 for context.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ activeMenu ] );\n\n\tconst context = {\n\t\tactiveItem,\n\t\tactiveMenu: menu,\n\t\tsetActiveMenu,\n\t\tnavigationTree,\n\t};\n\n\tconst classes = classnames( 'components-navigation', className );\n\tconst animateClassName = getAnimateClassName( {\n\t\ttype: 'slide-in',\n\t\torigin: slideOrigin,\n\t} );\n\n\treturn (\n\t\t<NavigationUI className={ classes }>\n\t\t\t<div\n\t\t\t\tkey={ menu }\n\t\t\t\tclassName={\n\t\t\t\t\tanimateClassName\n\t\t\t\t\t\t? classnames( {\n\t\t\t\t\t\t\t\t[ animateClassName ]:\n\t\t\t\t\t\t\t\t\tisMounted.current && slideOrigin,\n\t\t\t\t\t\t  } )\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<NavigationContext.Provider value={ context }>\n\t\t\t\t\t{ children }\n\t\t\t\t</NavigationContext.Provider>\n\t\t\t</div>\n\t\t</NavigationUI>\n\t);\n}\n\nexport default Navigation;\n"]}